ğŸ“‹ Event-Driven æ¶æ„æ ‡å‡†ç»“æ„

### 1ï¸âƒ£ **Events æ–‡ä»¶å¤¹ç»“æ„**ï¼ˆå¼‚æ­¥é€šä¿¡ - NATSï¼‰

```
microservices/xxx_service/
â”œâ”€â”€ events/
â”‚   â”œâ”€â”€ __init__.py          # å¯¼å‡ºæ‰€æœ‰ event ç›¸å…³å†…å®¹
â”‚   â”œâ”€â”€ models.py            # Event æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆPydantic modelsï¼‰
â”‚   â”œâ”€â”€ publishers.py        # Event å‘å¸ƒè€…ï¼ˆä¸šåŠ¡é€»è¾‘è°ƒç”¨ï¼‰
â”‚   â””â”€â”€ handlers.py          # Event è®¢é˜…å¤„ç†å™¨ï¼ˆæ¥æ”¶å…¶ä»–æœåŠ¡çš„äº‹ä»¶ï¼‰
â””â”€â”€ main.py                  # åªè´Ÿè´£æ³¨å†Œ handlersï¼Œä¸å†™å…·ä½“é€»è¾‘
```

**èŒè´£åˆ†ç¦»ï¼š**
- `models.py` - å®šä¹‰äº‹ä»¶æ•°æ®ç»“æ„
- `publishers.py` - å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•ï¼ˆæœ¬æœåŠ¡å‘å‡ºäº‹ä»¶ï¼‰
- `handlers.py` - å¤„ç†æ¥æ”¶åˆ°çš„äº‹ä»¶ï¼ˆè®¢é˜…å…¶ä»–æœåŠ¡äº‹ä»¶ï¼‰
- `main.py` - åœ¨ lifespan ä¸­æ³¨å†Œè®¢é˜…ï¼Œè°ƒç”¨ handlers

---

### 2ï¸âƒ£ **Clients æ–‡ä»¶å¤¹ç»“æ„**ï¼ˆåŒæ­¥é€šä¿¡ - HTTPï¼‰

```
microservices/xxx_service/
â”œâ”€â”€ clients/
â”‚   â”œâ”€â”€ __init__.py          # å¯¼å‡ºæ‰€æœ‰ client
â”‚   â”œâ”€â”€ wallet_client.py     # è°ƒç”¨ wallet_service çš„å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ billing_client.py    # è°ƒç”¨ billing_service çš„å®¢æˆ·ç«¯
â”‚   â””â”€â”€ ...
â””â”€â”€ main.py                  # åˆå§‹åŒ– clientsï¼ˆä¾èµ–æ³¨å…¥æˆ–å…¨å±€å®ä¾‹ï¼‰
```

**èŒè´£åˆ†ç¦»ï¼š**
- `clients/` - æ‰€æœ‰æœåŠ¡é—´åŒæ­¥è°ƒç”¨çš„ HTTP å®¢æˆ·ç«¯
- æ¯ä¸ª client å°è£…å¯¹å¤–éƒ¨æœåŠ¡çš„è°ƒç”¨é€»è¾‘
- åœ¨ `main.py` æˆ–ä¸šåŠ¡å±‚é€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨

---

## ğŸ¯ æ ‡å‡†åšæ³•æ€»ç»“

### âœ… **åº”è¯¥è¿™æ ·ï¼š**

1. **Events é›†ä¸­ç®¡ç†**
   - âœ… models, publishers, handlers éƒ½åœ¨ `events/` æ–‡ä»¶å¤¹
   - âœ… `main.py` åªè´Ÿè´£æ³¨å†Œè®¢é˜…å…³ç³»
   - âœ… ä¸šåŠ¡é€»è¾‘è°ƒç”¨ `publishers.py` å‘å¸ƒäº‹ä»¶

2. **Clients é›†ä¸­ç®¡ç†**
   - âœ… æ‰€æœ‰ service clients æ”¾åœ¨ `clients/` æ–‡ä»¶å¤¹
   - âœ… é€šè¿‡ä¾èµ–æ³¨å…¥æˆ–ç»Ÿä¸€åˆå§‹åŒ–ç®¡ç†
   - âœ… ä¸šåŠ¡é€»è¾‘é€šè¿‡ client è¿›è¡ŒåŒæ­¥è°ƒç”¨

### âŒ **ä¸åº”è¯¥è¿™æ ·ï¼š**

1. **Events åˆ†æ•£**
   - âŒ handler é€»è¾‘ç›´æ¥å†™åœ¨ `main.py`
   - âŒ event models æ•£è½åœ¨ä¸åŒæ–‡ä»¶
   - âŒ å‘å¸ƒäº‹ä»¶çš„ä»£ç åˆ°å¤„éƒ½æ˜¯

2. **Clients åˆ†æ•£**
   - âŒ åœ¨ `main.py` ç›´æ¥ `import WalletClient` è°ƒç”¨
   - âŒ æ¯ä¸ªä¸šåŠ¡æ–‡ä»¶è‡ªå·±åˆå§‹åŒ– client
   - âŒ æ²¡æœ‰ç»Ÿä¸€çš„ client ç®¡ç†

---

## ğŸ“Š å½“å‰é—®é¢˜

æ ¹æ®ä½ åˆšæ‰æåˆ°çš„ï¼š
1. âŒ æœ‰äº› event handler å†™åœ¨ `main.py` é‡Œï¼ˆåº”è¯¥åœ¨ `events/handlers.py`ï¼‰
2. âŒ æœ‰äº›æœåŠ¡æœ‰ `events/` æ–‡ä»¶å¤¹ï¼Œæœ‰äº›æ²¡æœ‰ï¼ˆåº”è¯¥ç»Ÿä¸€ï¼‰
3. âŒ client è°ƒç”¨ç›´æ¥åœ¨ `main.py` æ²¡æœ‰é›†ä¸­ç®¡ç†ï¼ˆåº”è¯¥åœ¨ `clients/` æ–‡ä»¶å¤¹ï¼‰
