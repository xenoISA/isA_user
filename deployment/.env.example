# ==========================================
# isA User Platform - Environment Variables
# ==========================================
# Copy this file to .env, .env.local, .env.development, etc.
# and fill in your actual values

# ==========================================
# General Configuration
# ==========================================
ENV=development  # development, testing, staging, production, local
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG  # DEBUG, INFO, WARNING, ERROR, CRITICAL
APP_NAME=isA User Microservice
APP_VERSION=2.0.0

# ==========================================
# Server Configuration
# ==========================================
HOST=127.0.0.1
PORT=8200
RELOAD=false
SERVICE_HOST=localhost

# ==========================================
# Service Discovery (Consul)
# ==========================================
CONSUL_ENABLED=true
CONSUL_HOST=localhost
CONSUL_PORT=8500
SERVICE_DISCOVERY_ENABLED=true
SERVICE_REGISTRY_URL=http://localhost:8500

# ==========================================
# Database (Supabase)
# ==========================================
# Local Supabase (for development)
SUPABASE_LOCAL_URL=http://127.0.0.1:54321
SUPABASE_LOCAL_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMAs_-IsVo
SUPABASE_LOCAL_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
SUPABASE_JWT_SECRET=super-secret-jwt-token-with-at-least-32-characters-long

# Production Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Database URLs (if using PostgreSQL directly)
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres
DATABASE_ECHO=false
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ==========================================
# Event Streaming (NATS)
# ==========================================
NATS_ENABLED=true
NATS_URL=nats://localhost:4222
NATS_USERNAME=isa_user_service
NATS_PASSWORD=service123

# Multiple NATS servers (comma-separated for clustering)
# NATS_SERVERS=nats://server1:4222,nats://server2:4222,nats://server3:4222

# Event Service Specific
EVENT_SERVICE_NATS_URL=nats://localhost:4222
EVENT_SERVICE_BATCH_SIZE=100
EVENT_SERVICE_PROCESSING_INTERVAL=5

# ==========================================
# Object Storage (MinIO - Development/Local)
# ==========================================
MINIO_ENABLED=true
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET_NAME=isa-storage

# Upload Configuration
UPLOAD_MAX_SIZE=52428800  # 50MB in bytes
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/json

# ==========================================
# Object Storage (AWS S3 - Production)
# ==========================================
S3_ENABLED=false
S3_BUCKET_NAME=your-production-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY=your-aws-access-key
S3_SECRET_KEY=your-aws-secret-key

# ==========================================
# API Gateway
# ==========================================
GATEWAY_ENABLED=true
GATEWAY_URL=http://localhost:8000

# ==========================================
# Service Ports
# ==========================================
AUTH_SERVICE_PORT=8201
ACCOUNT_SERVICE_PORT=8202
SESSION_SERVICE_PORT=8203
AUTHORIZATION_SERVICE_PORT=8204
AUDIT_SERVICE_PORT=8205
NOTIFICATION_SERVICE_PORT=8206
PAYMENT_SERVICE_PORT=8207
WALLET_SERVICE_PORT=8208
STORAGE_SERVICE_PORT=8209
ORDER_SERVICE_PORT=8210
TASK_SERVICE_PORT=8211
ORGANIZATION_SERVICE_PORT=8212
INVITATION_SERVICE_PORT=8213
VAULT_SERVICE_PORT=8214
DEVICE_SERVICE_PORT=8220
OTA_SERVICE_PORT=8221
TELEMETRY_SERVICE_PORT=8225
EVENT_SERVICE_PORT=8230

# ==========================================
# Payment Service (Stripe)
# ==========================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key

# ==========================================
# Blockchain Integration
# ==========================================
BLOCKCHAIN_GATEWAY_URL=http://localhost:8000
BLOCKCHAIN_ENABLED=false

# ==========================================
# Authentication Providers
# ==========================================
# Auth Provider Mode: auth0 | supabase | both
AUTH_PROVIDER=both

# Auth0
AUTH0_DOMAIN=dev-47zcqarlxizdkads.us.auth0.com
AUTH0_AUDIENCE=https://dev-47zcqarlxizdkads.us.auth0.com/api/v2/
AUTH0_CLIENT_ID=your-auth0-client-id
AUTH0_CLIENT_SECRET=your-auth0-client-secret

# JWT
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
AUTH_SERVICE_JWT_SECRET=your-development-jwt-secret-here
AUTH_SERVICE_JWT_EXPIRATION=3600

# Security
SECRET_KEY=your-secret-key-change-in-production
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# Email Service (Optional)
# ==========================================
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-email-password
SMTP_USE_TLS=true
EMAIL_FROM=noreply@yourdomain.com

# Resend API (alternative to SMTP)
RESEND_API_KEY=your-resend-api-key

# ==========================================
# Redis (Optional - for caching)
# ==========================================
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==========================================
# Caching Configuration
# ==========================================
CACHE_TTL=3600  # 1 hour in seconds
AUTH_CACHE_TTL=300  # 5 minutes in seconds

# ==========================================
# CORS Configuration
# ==========================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://www.iapro.ai,http://localhost:8888
CORS_ALLOW_CREDENTIALS=true

# ==========================================
# Rate Limiting
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds

# ==========================================
# Monitoring & Observability
# ==========================================
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30  # seconds

# Loki Centralized Logging
LOKI_URL=http://localhost:3100
LOKI_ENABLED=true
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# ==========================================
# RudderStack (Analytics)
# ==========================================
RUDDERSTACK_WEBHOOK_SECRET=your-rudderstack-webhook-secret
RUDDERSTACK_DATA_PLANE_URL=https://your-data-plane-url

# ==========================================
# External Services & Webhooks
# ==========================================
WEBHOOK_TIMEOUT=30  # seconds
EXTERNAL_API_TIMEOUT=10  # seconds

# ==========================================
# Sentry (Error Tracking)
# ==========================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0

# ==========================================
# Feature Flags
# ==========================================
ENABLE_DEVICE_AUTH=true
ENABLE_API_KEYS=true
ENABLE_BLOCKCHAIN=false
ENABLE_ANALYTICS=true

# ==========================================
# Per-Service Configuration Examples
# ==========================================
# Each service can have specific overrides using the pattern:
# {SERVICE_NAME}_{VARIABLE}

# Examples:
# AUTH_SERVICE_PORT=8202
# AUTH_SERVICE_DEBUG=true
# AUTH_SERVICE_LOG_LEVEL=INFO
# AUTH_SERVICE_DATABASE_URL=postgresql://...

# PAYMENT_SERVICE_PORT=8207
# PAYMENT_SERVICE_STRIPE_SECRET_KEY=sk_test_...

# STORAGE_SERVICE_PORT=8208
# STORAGE_SERVICE_MINIO_BUCKET_NAME=custom-bucket

# EVENT_SERVICE_PORT=8230
# EVENT_SERVICE_NATS_URL=nats://localhost:4222
# EVENT_SERVICE_BATCH_SIZE=100
# EVENT_SERVICE_PROCESSING_INTERVAL=5
